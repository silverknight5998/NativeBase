{"version":3,"sources":["../../../basic/Drawer/index.js"],"names":["deviceScreen","get","TAP_DURATION","Drawer","state","viewport","onStartShouldSetPanResponderCapture","e","gestureState","shouldCaptureGestures","processShouldSet","getOpenLeft","width","_offsetOpen","getClosedLeft","_offsetClosed","getHeight","height","getMainWidth","getDrawerWidth","getOpenMask","props","panCloseMask","Math","max","getClosedMask","panOpenMask","getOpenOffset","openDrawerOffset","getClosedOffset","closedDrawerOffset","initialize","fullWidth","_prevLeft","_left","styles","container","flex","justifyContent","alignItems","main","position","top","borderWidth","drawer","initializeOpen","open","_open","side","type","setNativeProps","style","left","stylesheet","create","responder","onPanResponderRelease","updatePosition","mainProps","drawerProps","ratio","mainOverlayProps","drawerOverlayProps","tweenHandler","propsFrag","_panning","Date","now","_panStartTime","processTapGestures","abs","dx","_activeTween","inMask","testPanResponderMask","acceptTap","tapToClose","close","context","_childDrawer","x0","nativeEvent","pageX","deltaOpen","deltaClose","start","end","duration","tweenDuration","easingType","tweenEasing","onFrame","tweenValue","onEnd","adjustForCaptureGestures","onOpen","onClose","captureGestures","shouldCapture","mainOverlay","drawerOverlay","pointerEvents","first","renderMain","renderDrawer","second","handleSetViewport","panHandlers","c","children","overlay","elevation","content","tweenPresets","parallax","propTypes","bool","oneOf","node","number","func","oneOfType","object","string","defaultProps","right","bottom","backgroundColor"],"mappings":"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","file":"index.js","sourcesContent":["import React, { PropTypes, Component } from 'react';\nimport { PanResponder, View, StyleSheet, Dimensions } from 'react-native';\n\nimport tween from './tweener';\n\nconst deviceScreen = Dimensions.get('window');\nconst TAP_DURATION = 250;\n\nexport default class Drawer extends Component {\n\n  static tweenPresets = {\n    parallax: (ratio, side = 'left') => {\n      const drawer = { [side]: -150 * (1 - ratio) };\n      return { drawer };\n    },\n  };\n  static propTypes = {\n    acceptTap: PropTypes.bool,\n    captureGestures: PropTypes.oneOf([true, false, 'open', 'closed']),\n    children: PropTypes.node,\n    content: PropTypes.node,\n    elevation: PropTypes.number,\n    initializeOpen: PropTypes.bool,\n    open: PropTypes.bool,\n    onClose: PropTypes.func,\n    onOpen: PropTypes.func,\n    openDrawerOffset: PropTypes.oneOfType([PropTypes.number, PropTypes.func]),\n    panCloseMask: PropTypes.number,\n    panOpenMask: PropTypes.number,\n    side: PropTypes.oneOf(['left', 'right']),\n    styles: PropTypes.object,\n    tapToClose: PropTypes.bool,\n    tweenDuration: PropTypes.number,\n    tweenEasing: PropTypes.string,\n    tweenHandler: PropTypes.func,\n    type: PropTypes.oneOf(['overlay', 'static', 'displace']),\n  };\n\n  static defaultProps = {\n    open: null,\n    initializeOpen: false,\n\n    type: 'displace',\n    closedDrawerOffset: 0,\n    openDrawerOffset: 0,\n    panOpenMask: null,\n    panCloseMask: null,\n\n    tweenHandler: null,\n    tweenDuration: 250,\n    tweenEasing: 'linear',\n\n    captureGestures: 'open',\n    acceptTap: false,\n    tapToClose: false,\n\n    styles: {},\n    elevation: 0,\n    onOpen: () => {},\n    onClose: () => {},\n    side: 'left',\n\n  };\n\n  state = {\n    viewport: deviceScreen,\n  };\n\n  componentWillMount() {\n    this.initialize(this.props);\n  }\n\n  onStartShouldSetPanResponderCapture = (e, gestureState) => {\n    if (this.shouldCaptureGestures()) return this.processShouldSet(e, gestureState);\n    return false;\n  };\n\n  getOpenLeft = () => this.state.viewport.width - this._offsetOpen;\n  getClosedLeft = () => this._offsetClosed;\n  getHeight = () => this.state.viewport.height;\n  getMainWidth = () => this.state.viewport.width - this._offsetClosed;\n  getDrawerWidth = () => this.state.viewport.width - this._offsetOpen;\n  getOpenMask = () => {\n    if (this.props.panCloseMask && this.props.panCloseMask % 1 === 0) {\n      return this.props.panCloseMask;\n    }\n    if (this.props.panCloseMask) return this.state.viewport.width * this.props.panCloseMask;\n    return Math.max(0.05, this._offsetOpen);\n  };\n  getClosedMask = () => {\n    if (this.props.panOpenMask && this.props.panOpenMask % 1 === 0) return this.props.panOpenMask;\n    if (this.props.panOpenMask) return this.state.viewport.width * this.props.panOpenMask;\n    return Math.max(0.05, this._offsetClosed);\n  };\n  getOpenOffset = (props, viewport) => {\n    if (typeof props.openDrawerOffset === 'function') return props.openDrawerOffset(viewport);\n    return props.openDrawerOffset % 1 === 0 ?\n      props.openDrawerOffset : props.openDrawerOffset * viewport.width;\n  };\n  getClosedOffset = (props, viewport) => {\n    if (typeof props.closedDrawerOffset === 'function') return props.closedDrawerOffset(viewport);\n    return props.closedDrawerOffset % 1 === 0 ?\n      props.closedDrawerOffset : props.closedDrawerOffset * viewport.width;\n  };\n\n  initialize = (props) => {\n    const fullWidth = this.state.viewport.width;\n    this._offsetClosed = this.getClosedOffset(props, this.state.viewport);\n    this._offsetOpen = this.getOpenOffset(props, this.state.viewport);\n    this._prevLeft = this._left;\n\n    const styles = {\n      container: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center',\n      },\n    };\n\n    styles.main = Object.assign({\n      position: 'absolute',\n      top: 0,\n    }, { borderWidth: 0 }, this.props.styles.main);\n\n    styles.drawer = Object.assign({\n      position: 'absolute',\n      top: 0,\n    }, { borderWidth: 0 }, this.props.styles.drawer);\n\n    if (props.initializeOpen || props.open) {\n      this._open = true;\n      this._left = fullWidth - this._offsetOpen;\n      styles.main[this.props.side] = 0;\n      styles.drawer[this.props.side] = 0;\n      if (props.type === 'static') styles.main[this.props.side] = fullWidth - this._offsetOpen;\n      if (props.type === 'displace') styles.main[this.props.side] = fullWidth - this._offsetOpen;\n    } else { // closed\n      this._open = false;\n      this._left = this._offsetClosed;\n      styles.main[this.props.side] = this._offsetClosed;\n      if (props.type === 'static') styles.drawer[this.props.side] = 0;\n      if (props.type === 'overlay') styles.drawer[this.props.side] = this._offsetClosed + this._offsetOpen - fullWidth;\n      if (props.type === 'displace') styles.drawer[this.props.side] = -fullWidth + this._offsetClosed + this._offsetOpen;\n    }\n\n    if (this.main) {\n      this.drawer.setNativeProps({ style: { left: styles.drawer.left } });\n      this.main.setNativeProps({ style: { left: styles.main.left } });\n    } else {\n      this.stylesheet = StyleSheet.create(styles);\n      this.responder = PanResponder.create({\n        onStartShouldSetPanResponderCapture: this.onStartShouldSetPanResponderCapture,\n        onPanResponderRelease: this.onPanResponderRelease,\n      });\n    }\n  };\n\n  updatePosition = () => {\n    let mainProps = {};\n    let drawerProps = {};\n    const ratio = (this._left - this._offsetClosed) / (this.getOpenLeft() - this._offsetClosed);\n\n    switch (this.props.type) {\n      case 'overlay':\n        drawerProps[this.props.side] = -this.state.viewport.width + this._offsetOpen + this._left;\n        mainProps[this.props.side] = this._offsetClosed;\n        break;\n      case 'static':\n        mainProps[this.props.side] = this._left;\n        drawerProps[this.props.side] = 0;\n        break;\n      case 'displace':\n        mainProps[this.props.side] = this._left;\n        drawerProps[this.props.side] = -this.state.viewport.width + this._left + this._offsetOpen;\n        break;\n    }\n\n    const mainOverlayProps = null;\n    const drawerOverlayProps = null;\n    if (this.props.tweenHandler) {\n      const propsFrag = this.props.tweenHandler(ratio, this.props.side);\n      mainProps = Object.assign(mainProps, propsFrag.main);\n      drawerProps = Object.assign(drawerProps, propsFrag.drawer);\n    }\n    this.drawer.setNativeProps({ style: drawerProps });\n    this.main.setNativeProps({ style: mainProps });\n  };\n\n\n  onPanResponderRelease = (e, gestureState) => {\n    this._panning = false;\n    if (Date.now() - this._panStartTime < TAP_DURATION) this.processTapGestures();\n    if (Math.abs(gestureState.dx) < 50 && this._activeTween) return;\n\n    this.updatePosition();\n    this._prevLeft = this._left;\n  };\n\n  processShouldSet = (e, gestureState) => {\n    const inMask = this.testPanResponderMask(e, gestureState);\n    if (!inMask) return false;\n    this._panStartTime = Date.now();\n    if (inMask && this.shouldCaptureGestures()) return true;\n  };\n\n\n  processTapGestures = () => {\n    if (this._activeTween) return false;\n    if (this.props.acceptTap || (this.props.tapToClose && this._open)) {\n      this._open ? this.close() : this.open();\n      return true;\n    }\n    return false;\n  };\n\n  shouldCaptureGestures() {\n    if (this.props.captureGestures === true) return true;\n    if (this.props.captureGestures === 'closed' && this._open === false) return true;\n    if (this.props.captureGestures === 'open' && this._open === true) return true;\n    return false;\n  }\n\n  testPanResponderMask = (e, gestureState) => {\n    if (this.context.drawer && this.context.drawer._open) return false;\n    if (this._childDrawer && this._childDrawer._open) return false;\n\n    const x0 = e.nativeEvent.pageX;\n    const deltaOpen = this.props.side === 'left' ? this.state.viewport.width - x0 : x0;\n    const deltaClose = this.props.side === 'left' ? x0 : this.state.viewport.width - x0;\n\n    if (this._open && deltaOpen > this.getOpenMask()) return false;\n    if (!this._open && deltaClose > this.getClosedMask()) return false;\n    return true;\n  };\n\n\n  open = (type) => {\n    const start = this._left;\n    const end = this.getOpenLeft();\n\n\n    this._activeTween = tween({\n      start: this._left,\n      end: this.getOpenLeft(),\n      duration: this.props.tweenDuration,\n      easingType: this.props.tweenEasing,\n      onFrame: (tweenValue) => {\n        this._left = tweenValue;\n        this.updatePosition();\n      },\n      onEnd: () => {\n        this._activeTween = null;\n        this._open = true;\n        this._prevLeft = this._left;\n        this.adjustForCaptureGestures();\n        this.props.onOpen();\n      },\n    });\n  };\n\n  close = (type) => {\n    const start = this._left;\n    const end = this.getClosedLeft();\n\n    this._activeTween = tween({\n      start,\n      end,\n      easingType: this.props.tweenEasing,\n      duration: this.props.tweenDuration,\n      onFrame: (tweenValue) => {\n        this._left = tweenValue;\n        this.updatePosition();\n      },\n      onEnd: () => {\n        this._activeTween = null;\n        this._open = false;\n        this._prevLeft = this._left;\n        this.adjustForCaptureGestures();\n        this.props.onClose();\n      },\n    });\n  };\n\n  adjustForCaptureGestures() {\n    if (!this.props.captureGestures) return;\n    const shouldCapture = this.shouldCaptureGestures();\n    if (this.mainOverlay && this.drawerOverlay) {\n      this.mainOverlay.setNativeProps({ pointerEvents: shouldCapture && this._open ? 'auto' : 'none' });\n      this.drawerOverlay.setNativeProps({ pointerEvents: shouldCapture && !this._open ? 'auto' : 'none' });\n    }\n  }\n\n\n  render() {\n    const first = this.props.type === 'overlay' ? this.renderMain() : this.renderDrawer();\n    const second = this.props.type === 'overlay' ? this.renderDrawer() : this.renderMain();\n\n    return (\n      <View\n        key=\"drawerContainer\"\n        onLayout={this.handleSetViewport}\n        style={this.stylesheet.container}\n      >\n        {first}\n        {second}\n      </View>\n    );\n  }\n\n  renderMain() {\n    return (\n      <View\n        {...this.responder.panHandlers}\n        key=\"main\"\n        ref={c => this.main = c}\n        style={[this.stylesheet.main, { height: this.getHeight(), width: this.getMainWidth() }]}\n      >\n        {this.props.children}\n        <View\n          pointerEvents={this._open && this.shouldCaptureGestures() ? 'auto' : 'none'}\n          ref={c => this.mainOverlay = c}\n          style={[styles.overlay, this.props.styles && this.props.styles.mainOverlay]}\n        />\n      </View>\n    );\n  }\n\n  renderDrawer() {\n    return (\n      <View\n        {...this.responder.panHandlers}\n        key=\"drawer\"\n        ref={c => this.drawer = c}\n        elevation={this.props.elevation}\n        style={[this.stylesheet.drawer, { height: this.getHeight(), width: this.getDrawerWidth() }]}\n      >\n        {this.props.content}\n        <View\n          pointerEvents={!this._open && this.shouldCaptureGestures() ? 'auto' : 'none'}\n          ref={c => this.drawerOverlay = c}\n          style={[styles.overlay, this.props.styles && this.props.styles.drawerOverlay]}\n        />\n      </View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  overlay: {\n    right: 0,\n    left: 0,\n    top: 0,\n    bottom: 0,\n    position: 'absolute',\n    backgroundColor: 'transparent',\n  },\n});\n"]}