{"version":3,"sources":["../../../basic/Drawer/tweener.js"],"names":["easingTypes","require","module","exports","config","Tween","_rafLoop","bind","terminate","_t0","Date","now","_config","prototype","_break","duration","start","end","easingType","elapsed","onFrame","onEnd","tweenVal","requestAnimationFrame"],"mappings":"AAAA,GAAMA,aAAcC,QAAQ,iBAAR,CAApB;;AAEAC,OAAOC,OAAP,CAAiB,SAAUC,MAAV,CAAkB;AACjC,MAAO,IAAIC,MAAJ,CAAUD,MAAV,CAAP;AACD,CAFD;;AAIA,QAASC,MAAT,CAAeD,MAAf,CAAuB;AACrB,KAAKE,QAAL,CAAgB,KAAKA,QAAL,CAAcC,IAAd,CAAmB,IAAnB,CAAhB;AACA,KAAKC,SAAL,CAAiB,KAAKA,SAAL,CAAeD,IAAf,CAAoB,IAApB,CAAjB;;AAEA,KAAKE,GAAL,CAAWC,KAAKC,GAAL,EAAX;AACA,KAAKC,OAAL,CAAeR,MAAf;AACA,KAAKE,QAAL;AACD;;AAEDD,MAAMQ,SAAN,CAAgBP,QAAhB,CAA2B,UAAY;AACrC,GAAI,KAAKQ,MAAT,CAAiB,CAAE,OAAS,CADS;;AAGQ,KAAKF,OAHb,CAG7BG,QAH6B,SAG7BA,QAH6B,CAGnBC,KAHmB,SAGnBA,KAHmB,CAGZC,GAHY,SAGZA,GAHY,CAGPC,UAHO,SAGPA,UAHO;AAIrC,GAAMP,KAAMD,KAAKC,GAAL,EAAZ;AACA,GAAMQ,SAAUR,IAAM,KAAKF,GAA3B;;AAEA,GAAIU,SAAWJ,QAAf,CAAyB;AACvB,KAAKH,OAAL,CAAaQ,OAAb,CAAqBH,GAArB;AACA,KAAKL,OAAL,CAAaS,KAAb;AACA;AACD;;AAED,GAAMC,UAAWtB,YAAYkB,UAAZ,EAAwBC,OAAxB,CAAiCH,KAAjC,CAAwCC,GAAxC,CAA6CF,QAA7C,CAAjB;AACA,KAAKH,OAAL,CAAaQ,OAAb,CAAqBE,QAArB;;AAEAC,sBAAsB,KAAKjB,QAA3B;AACD,CAjBD;;AAmBAD,MAAMQ,SAAN,CAAgBL,SAAhB,CAA4B,UAAY;AACtC,KAAKM,MAAL,CAAc,IAAd;AACD,CAFD","file":"tweener.js","sourcesContent":["const easingTypes = require('tween-functions');\n\nmodule.exports = function (config) {\n  return new Tween(config);\n};\n\nfunction Tween(config) {\n  this._rafLoop = this._rafLoop.bind(this);\n  this.terminate = this.terminate.bind(this);\n\n  this._t0 = Date.now();\n  this._config = config;\n  this._rafLoop();\n}\n\nTween.prototype._rafLoop = function () {\n  if (this._break) { return; }\n\n  const { duration, start, end, easingType } = this._config;\n  const now = Date.now();\n  const elapsed = now - this._t0;\n\n  if (elapsed >= duration) {\n    this._config.onFrame(end);\n    this._config.onEnd();\n    return;\n  }\n\n  const tweenVal = easingTypes[easingType](elapsed, start, end, duration);\n  this._config.onFrame(tweenVal);\n\n  requestAnimationFrame(this._rafLoop);\n};\n\nTween.prototype.terminate = function () {\n  this._break = true;\n};\n"]}