{"version":3,"sources":["../../../src/basic/Picker.ios.js"],"names":["PickerNB","props","state","modalVisible","currentLabel","getLabel","dataSource","getChildren","children","nextProps","nextLabel","currentDS","nextDS","setState","picker","pickerItem","visible","defaultProps","style","getInitialStyle","itemStyle","item","_","find","child","value","selectedValue","get","Array","isArray","concat","React","cloneElement","iosIcon","fontSize","lineHeight","onPress","_setModalVisible","text","placeholder","renderButton","selectedItem","getSelectedItem","textStyle","note","placeholderStyle","undefined","renderIcon","renderHeader","headerStyle","shadowOffset","shadowColor","shadowRadius","shadowOpacity","headerBackButtonStyle","headerBackButtonTextStyle","headerBackButtonText","headerTitleStyle","iosHeader","_root","c","supportedOrientations","modalStyle","index","String","onValueChange","current","label","itemTextStyle","Component","Item","render","propTypes","ViewPropTypes","PropTypes","func","StyledPickerNB","mapPropsToStyleNames"],"mappings":"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","file":"Picker.ios.js","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport createReactClass from \"create-react-class\";\nimport { Picker, Modal, View, ViewPropTypes, FlatList } from \"react-native\";\nimport _ from \"lodash\";\nimport { Text } from \"./Text\";\nimport { List } from \"./List\";\nimport { IconNB as Icon } from \"./IconNB\";\nimport { Radio } from \"./Radio\";\nimport { Container } from \"./Container\";\nimport { ListItem } from \"./ListItem\";\nimport { Button } from \"./Button\";\nimport { Header } from \"./Header\";\nimport { Title } from \"./Title\";\nimport { Left } from \"./Left\";\nimport { Right } from \"./Right\";\nimport { Body } from \"./Body\";\nimport { connectStyle } from \"native-base-shoutem-theme\";\nimport computeProps from \"../utils/computeProps\";\n\nimport mapPropsToStyleNames from \"../utils/mapPropsToStyleNames\";\n\nclass PickerNB extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      modalVisible: false,\n      currentLabel: this.getLabel(props),\n      dataSource: this.getChildren(props.children)\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const currentLabel = this.state.currentLabel;\n    const nextLabel = this.getLabel(nextProps);\n    const currentDS = this.state.dataSource;\n    const nextDS = this.getChildren(nextProps.children);\n\n    if (currentLabel !== nextLabel) {\n      this.setState({\n        currentLabel: nextLabel\n      });\n    }\n    if (currentDS !== nextDS) {\n      this.setState({\n        dataSource: nextDS\n      });\n    }\n  }\n\n  getInitialStyle() {\n    return {\n      picker: {\n        // alignItems: 'flex-end'\n      },\n      pickerItem: {}\n    };\n  }\n  _setModalVisible(visible) {\n    this.setState({ modalVisible: visible });\n  }\n\n  prepareRootProps() {\n    const defaultProps = {\n      style: this.getInitialStyle().picker,\n      itemStyle: this.getInitialStyle().pickerItem\n    };\n\n    return computeProps(this.props, defaultProps);\n  }\n\n  getLabel(props) {\n    let children = this.getChildren(props.children);\n    const item = _.find(\n      children,\n      child => child.props.value === props.selectedValue\n    );\n    return _.get(item, \"props.label\");\n  }\n\n  getSelectedItem() {\n    return _.find(\n      this.props.children,\n      child => child.props.value === this.props.selectedValue\n    );\n  }\n\n  getChildren(children) {\n    if (children && !Array.isArray(children)) {\n      return [].concat(children)\n    }\n    return children;\n  }\n\n  renderIcon() {\n    return React.cloneElement(this.props.iosIcon, {\n      style: [{\n        fontSize: 22,\n        lineHeight: 26\n      }, { ...this.props.iosIcon.props.style }]\n    });\n  }\n\n  renderButton() {\n    const onPress = () => {\n      this._setModalVisible(true);\n    };\n    const text = this.state.currentLabel\n      ? this.state.currentLabel\n      : this.props.placeholder;\n    if (this.props.renderButton) {\n      return this.props.renderButton({\n        onPress,\n        text,\n        picker: this,\n        selectedItem: this.getSelectedItem()\n      });\n    }\n    return (\n      <Button\n        style={this.props.style}\n        dark\n        picker\n        transparent\n        onPress={onPress}\n      >\n        {this.state.currentLabel ? (\n          <Text style={this.props.textStyle} note={this.props.note}>\n            {this.state.currentLabel}\n          </Text>\n        ) : (\n            <Text\n              style={[this.props.textStyle, this.props.placeholderStyle]}\n              note={this.props.note === false ? false : true}\n            >\n              {this.props.placeholder}\n            </Text>\n          )}\n        {this.props.iosIcon === undefined ? null : this.renderIcon()}\n      </Button>\n    );\n  }\n\n  renderHeader() {\n    return this.props.renderHeader ? (\n      this.props.renderHeader(() => this._setModalVisible(false))\n    ) : (\n        <Header style={this.props.headerStyle}>\n          <Left>\n            <Button\n              style={{\n                shadowOffset: null,\n                shadowColor: null,\n                shadowRadius: null,\n                shadowOpacity: null,\n                ...this.props.headerBackButtonStyle\n              }}\n              transparent\n              onPress={() => {\n                this._setModalVisible(false);\n              }}\n            >\n              <Text style={this.props.headerBackButtonTextStyle}>\n                {this.props.headerBackButtonText || \"Back\"}\n              </Text>\n            </Button>\n          </Left>\n          <Body>\n            <Title style={this.props.headerTitleStyle}>\n              {this.props.iosHeader || \"Select One\"}\n            </Title>\n          </Body>\n          <Right />\n        </Header>\n      );\n  }\n\n  render() {\n    return (\n      <View ref={c => (this._root = c)}>\n        {this.renderButton()}\n        <Modal\n          supportedOrientations={this.props.supportedOrientations || null}\n          animationType=\"slide\"\n          transparent={false}\n          visible={this.state.modalVisible}\n          onRequestClose={() => {\n            this._setModalVisible(false);\n          }}\n        >\n          <Container style={this.props.modalStyle}>\n            {this.renderHeader()}\n            <FlatList\n              data={this.state.dataSource}\n              keyExtractor={(item, index) => String(index)}\n              renderItem={({ item }) => <ListItem\n                selected={item.props.value === this.props.selectedValue}\n                button\n                style={this.props.itemStyle}\n                onPress={() => {\n                  this._setModalVisible(false);\n                  this.props.onValueChange(item.props.value);\n                  this.setState({ current: item.props.label });\n                }}\n              >\n                <Left>\n                  <Text style={this.props.itemTextStyle}>\n                    {item.props.label}\n                  </Text>\n                </Left>\n                <Right>\n                  {item.props.value === this.props.selectedValue ? (\n                    <Radio selected />\n                  ) : (\n                      <Radio selected={false} />\n                    )}\n                </Right>\n              </ListItem>}\n            />\n          </Container>\n        </Modal>\n      </View >\n    );\n  }\n}\n\nPickerNB.Item = createReactClass({\n  render() {\n    return <Picker.Item {...this.props()} />;\n  }\n});\n\nPickerNB.propTypes = {\n  ...ViewPropTypes,\n  renderButton: PropTypes.func\n};\n\nconst StyledPickerNB = connectStyle(\n  \"NativeBase.PickerNB\",\n  {},\n  mapPropsToStyleNames\n)(PickerNB);\n\nexport { StyledPickerNB as PickerNB };\n"]}