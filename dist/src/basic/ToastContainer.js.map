{"version":3,"sources":["../../../src/basic/ToastContainer.js"],"names":["POSITION","ABSOLUTE","BOTTOM","TOP","ToastContainer","config","toastInstance","_root","showToast","getModalState","closeToast","props","state","fadeAnim","Animated","Value","keyboardHeight","isKeyboardVisible","modalVisible","keyboardDidHide","bind","keyboardDidShow","_panResponder","PanResponder","create","onMoveShouldSetPanResponderCapture","onPanResponderRelease","evt","gestureState","moveX","x0","console","log","Alert","alert","text","onPress","style","cancelable","Keyboard","addListener","position","opacity","width","elevation","paddingHorizontal","Platform","OS","PLATFORM","IOS","top","undefined","bottom","getTop","buttonText","trim","length","setState","e","endCoordinates","height","getButtonText","type","supportedOrientations","buttonTextStyle","buttonStyle","textStyle","onClose","closeTimeout","clearTimeout","duration","setTimeout","timing","toValue","start","reason","closeModal","getToastStyle","panHandlers","Component","propTypes","ViewPropTypes","PropTypes","oneOfType","object","number","array","StyledToastContainer","mapPropsToStyleNames"],"mappings":"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","file":"ToastContainer.js","sourcesContent":["/* eslint-disable class-methods-use-this */\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Keyboard,\n  Platform,\n  Animated,\n  ViewPropTypes,\n  PanResponder,\n  Alert\n} from 'react-native';\nimport { connectStyle } from 'native-base-shoutem-theme';\n\nimport mapPropsToStyleNames from '../utils/mapPropsToStyleNames';\nimport { PLATFORM } from '../theme/variables/commonColor';\n\nimport { Text } from './Text';\nimport { Button } from './Button';\nimport { Toast } from './Toast';\n\nconst POSITION = {\n  ABSOLUTE: 'absolute',\n  BOTTOM: 'bottom',\n  TOP: 'top'\n};\n\nclass ToastContainer extends Component {\n  static toastInstance;\n  static show({ ...config }) {\n    this.toastInstance._root.showToast({ config });\n  }\n  static hide() {\n    if (this.toastInstance._root.getModalState()) {\n      this.toastInstance._root.closeToast('functionCall');\n    }\n  }\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      fadeAnim: new Animated.Value(0),\n      keyboardHeight: 0,\n      isKeyboardVisible: false,\n      modalVisible: false\n    };\n\n    this.keyboardDidHide = this.keyboardDidHide.bind(this);\n    this.keyboardDidShow = this.keyboardDidShow.bind(this);\n\n    this._panResponder = PanResponder.create({\n      onMoveShouldSetPanResponderCapture: () => true,\n      onPanResponderRelease: (evt, gestureState) => {\n        if (gestureState.moveX > gestureState.x0) {\n          console.log('RIGHT');\n          this.closeToast('user');\n        }\n        if (gestureState.moveX < gestureState.x0) {\n          console.log('LEFT');\n          this.closeToast('user');\n        }\n      }\n    });\n  }\n\n  componentDidMount() {\n    console.log('Implementation test');\n    Alert.alert(\n      'Alert Title',\n      'My Alert Msg',\n      [\n        {\n          text: 'Ask me later',\n          onPress: () => console.log('Ask me later pressed')\n        },\n        {\n          text: 'Cancel',\n          onPress: () => console.log('Cancel Pressed'),\n          style: 'cancel'\n        },\n        { text: 'OK', onPress: () => console.log('OK Pressed') }\n      ],\n      { cancelable: false }\n    );\n    Keyboard.addListener('keyboardDidShow', this.keyboardDidShow);\n    Keyboard.addListener('keyboardDidHide', this.keyboardDidHide);\n  }\n\n  getToastStyle() {\n    return {\n      position: POSITION.ABSOLUTE,\n      opacity: this.state.fadeAnim,\n      width: '100%',\n      elevation: 9,\n      paddingHorizontal: Platform.OS === PLATFORM.IOS ? 20 : 0,\n      top: this.state.position === POSITION.TOP ? 30 : undefined,\n      bottom:\n        this.state.position === POSITION.BOTTOM ? this.getTop() : undefined\n    };\n  }\n\n  getTop() {\n    if (Platform.OS === PLATFORM.IOS) {\n      if (this.state.isKeyboardVisible) {\n        return this.state.keyboardHeight;\n      }\n      return 30;\n    }\n    return 0;\n  }\n\n  getButtonText(buttonText) {\n    if (buttonText) {\n      if (buttonText.trim().length === 0) {\n        return undefined;\n      }\n      return buttonText;\n    }\n    return undefined;\n  }\n  getModalState() {\n    return this.state.modalVisible;\n  }\n\n  keyboardDidHide() {\n    this.setState({\n      keyboardHeight: 0,\n      isKeyboardVisible: false\n    });\n  }\n\n  keyboardDidShow(e) {\n    this.setState({\n      keyboardHeight: e.endCoordinates.height,\n      isKeyboardVisible: true\n    });\n  }\n\n  showToast({ config }) {\n    this.setState({\n      modalVisible: true,\n      text: config.text,\n      buttonText: this.getButtonText(config.buttonText),\n      type: config.type,\n      position: config.position ? config.position : POSITION.BOTTOM,\n      supportedOrientations: config.supportedOrientations,\n      style: config.style,\n      buttonTextStyle: config.buttonTextStyle,\n      buttonStyle: config.buttonStyle,\n      textStyle: config.textStyle,\n      onClose: config.onClose\n    });\n    // If we have a toast already open, cut off its close timeout so that it won't affect *this* toast.\n    if (this.closeTimeout) {\n      clearTimeout(this.closeTimeout);\n    }\n    // Set the toast to close after the duration.\n    if (config.duration !== 0) {\n      const duration = config.duration > 0 ? config.duration : 1500;\n      this.closeTimeout = setTimeout(\n        this.closeToast.bind(this, 'timeout'),\n        duration\n      );\n    }\n    // Fade the toast in now.\n    Animated.timing(this.state.fadeAnim, {\n      toValue: 1,\n      duration: 200\n    }).start();\n  }\n  closeModal(reason) {\n    this.setState({\n      modalVisible: false\n    });\n    const { onClose } = this.state;\n    if (onClose && typeof onClose === 'function') {\n      onClose(reason);\n    }\n  }\n  closeToast(reason) {\n    clearTimeout(this.closeTimeout);\n    Animated.timing(this.state.fadeAnim, {\n      toValue: 0,\n      duration: 200\n    }).start(this.closeModal.bind(this, reason));\n  }\n\n  render() {\n    if (this.state.modalVisible) {\n      return (\n        <Animated.View style={this.getToastStyle()}>\n          <Toast\n            {...this._panResponder.panHandlers}\n            style={this.state.style}\n            danger={this.state.type === 'danger'}\n            success={this.state.type === 'success'}\n            warning={this.state.type === 'warning'}\n          >\n            <Text style={this.state.textStyle}>{this.state.text}</Text>\n            {this.state.buttonText && (\n              <Button\n                style={this.state.buttonStyle}\n                onPress={() => this.closeToast('user')}\n              >\n                <Text style={this.state.buttonTextStyle}>\n                  {this.state.buttonText}\n                </Text>\n              </Button>\n            )}\n          </Toast>\n        </Animated.View>\n      );\n    }\n    return null;\n  }\n}\n\nToastContainer.propTypes = {\n  ...ViewPropTypes,\n  style: PropTypes.oneOfType([\n    PropTypes.object,\n    PropTypes.number,\n    PropTypes.array\n  ])\n};\n\nconst StyledToastContainer = connectStyle(\n  'NativeBase.ToastContainer',\n  {},\n  mapPropsToStyleNames\n)(ToastContainer);\n\nexport { StyledToastContainer as ToastContainer };\n"]}