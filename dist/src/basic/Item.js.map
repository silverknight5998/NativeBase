{"version":3,"sources":["../../../src/basic/Item.js"],"names":["Item","props","state","text","topAnim","Value","opacAnim","inputProps","value","setState","isFocused","floatUp","getRef","_inputRef","timing","toValue","duration","start","e","label","labelProps","newLabel","floatingLabel","push","createElement","key","float","style","fontSize","lineHeight","floatBack","newChildren","childrenArray","Children","toArray","children","remove","item","type","input","icon","iconProps","length","position","left","last","right","top","opacity","paddingTop","OS","undefined","paddingBottom","renderLabel","onFocus","onBlur","onChangeText","c","stackedLabel","flexDirection","flex","width","deviceWidth","roundedInputGroup","borderWidth","rounded","borderRadius","inputGroupRoundedBorderRadius","defaultProps","getInitialStyle","_root","prepareRootProps","renderChildren","childrenType","propName","component","error","prop","Error","displayName","propTypes","PropTypes","object","inlineLabel","bool","fixedLabel","success","StyledItem"],"mappings":"8yBAAA,4B;AACA;AACA;AACA;AACA;;AAEA;AACA,qD;AACA,mD;AACA,mE;AACA,8B;;AAEMA,I;AACJ,cAAYC,KAAZ,CAAmB;AACXA,KADW;AAEjB,MAAKC,KAAL,CAAa;AACXC,KAAM,EADK;AAEXC,QAAS,GAAI,uBAASC,KAAb,CAAmB,EAAnB,CAFE;AAGXC,SAAU,GAAI,uBAASD,KAAb,CAAmB,CAAnB,CAHC,CAAb,CAFiB;;AAOlB,C;AACmB;AAClB,GAAI,KAAKE,UAAL,CAAgBC,KAApB,CAA2B;AACzB,KAAKC,QAAL,CAAc,CAAEC,UAAW,IAAb,CAAd;AACA,KAAKC,OAAL,CAAa,CAAC,EAAd;AACD;AACD,GAAI,KAAKJ,UAAL,EAAmB,KAAKA,UAAL,CAAgBK,MAAvC;AACE,KAAKL,UAAL,CAAgBK,MAAhB,CAAuB,KAAKC,SAA5B;AACH,C;;AAEW;AACV,sBAASC,MAAT,CAAgB,KAAKZ,KAAL,CAAWE,OAA3B,CAAoC;AAClCW,QAAS,EADyB;AAElCC,SAAU,GAFwB,CAApC;AAGGC,KAHH;AAIA,sBAASH,MAAT,CAAgB,KAAKZ,KAAL,CAAWI,QAA3B,CAAqC;AACnCS,QAAS,CAD0B;AAEnCC,SAAU,GAFyB,CAArC;AAGGC,KAHH;AAID,C;;AAEOC,C,CAAG;AACT,sBAASJ,MAAT,CAAgB,KAAKZ,KAAL,CAAWE,OAA3B,CAAoC;AAClCW,QAASG,EAAIA,CAAJ,CAAQ,CAAC,EADgB;AAElCF,SAAU,GAFwB,CAApC;AAGGC,KAHH;AAIA,sBAASH,MAAT,CAAgB,KAAKZ,KAAL,CAAWI,QAA3B,CAAqC;AACnCS,QAAS,GAD0B;AAEnCC,SAAU,GAFyB,CAArC;AAGGC,KAHH;AAID,C;;AAEWE,K,CAAOC,U,CAAY;AAC7B,GAAMC,UAAW,EAAjB;AACA,GAAI,KAAKpB,KAAL,CAAWqB,aAAf,CAA8B;AAC5B,GAAI,KAAKpB,KAAL,CAAWQ,SAAf,CAA0B;AACxBW,SAASE,IAAT,CAAc,gBAAMC,aAAN;;;AAGPJ,UAHO;AAIVK,IAAK,WAJK;AAKVC,MAAO,IALG;AAMVC;AACEC,SAAU,EADZ;AAEEC,WAAY,EAFd;AAGKT,WAAWO,KAHhB,CANU,GAAd;;;;AAaA,KAAKhB,OAAL;AACD,CAfD,IAeO;AACLU,SAASE,IAAT,CAAcJ,KAAd;AACA,KAAKW,SAAL;AACD;AACF,CApBD,IAoBO;AACLT,SAASE,IAAT,CAAc,gBAAMC,aAAN;;;AAGPJ,UAHO;AAIVK,IAAK,UAJK,GAAd;;;AAOD;AACD,MAAOJ,SAAP;AACD,C;;AAEgB;AACf,GAAMU,aAAc,EAApB;AACA,GAAMC,eAAgB,gBAAMC,QAAN,CAAeC,OAAf,CAAuB,KAAKjC,KAAL,CAAWkC,QAAlC,CAAtB;;AAEA,GAAIhB,OAAQ,EAAZ;AACA,GAAIC,YAAa,EAAjB;AACAD,MAAQ,iBAAEiB,MAAF,CAASJ,aAAT,CAAwB,SAACK,IAAD,CAAU;AACxC,GAAIA,KAAKC,IAAL,eAAJ,CAAyB;AACvBlB,WAAaiB,KAAKpC,KAAlB;AACA,MAAOoC,KAAP;AACD;AACF,CALO,CAAR;;AAOA,GAAIE,OAAQ,EAAZ;AACA,GAAIhC,YAAa,EAAjB;AACAgC,MAAQ,iBAAEH,MAAF,CAASJ,aAAT,CAAwB,SAACK,IAAD,CAAU;AACxC,GAAIA,KAAKC,IAAL,eAAJ,CAAyB;AACvB/B,WAAa8B,KAAKpC,KAAlB;AACA,OAAKM,UAAL,CAAkB8B,KAAKpC,KAAvB;AACA,MAAOoC,KAAP;AACD;AACF,CANO,CAAR;;AAQA,GAAIG,MAAO,EAAX;AACA,GAAIC,WAAY,EAAhB;AACAD,KAAO,iBAAEJ,MAAF,CAASJ,aAAT,CAAwB,SAACK,IAAD,CAAU;AACvC,GAAIA,KAAKC,IAAL,aAAJ,CAAwB;AACtBG,UAAYJ,KAAKpC,KAAjB;AACA,MAAOoC,KAAP;AACD;AACF,CALM,CAAP;AAMA,GAAI,KAAKpC,KAAL,CAAWqB,aAAX,EAA4BkB,KAAKE,MAArC,CAA6C;AAC3CX,YAAYR,IAAZ,CAAiB,mDAAM,IAAI,IAAV,EAAmBkB,SAAnB,EAAjB;AACAV,YAAYR,IAAZ,CAAiB,oDAAU,IAAV,EAAe,IAAI,OAAnB,CAA2B,MAAO,CAAEoB,SAAU,UAAZ,CAAwBC,KAAO,KAAK3C,KAAL,CAAW4C,IAAZ,CAAoB,EAApB,CAAyB,EAAvD,CAA2DC,MAAO,CAAlE,CAAqEC,IAAK,KAAK7C,KAAL,CAAWE,OAArF,CAA8F4C,QAAS,KAAK9C,KAAL,CAAWI,QAAlH,CAA4H2C,WAAa,sBAASC,EAAT,GAAgB,KAAjB,CAA0BC,SAA1B,CAAsCA,SAA9K,CAAyLC,cAAgB,sBAASF,EAAT,GAAgB,KAAjB,CAA0BC,SAA1B,CAAsC,EAA9O,CAAlC,EAAsR,2CAAW/B,UAAX,CAAyB,KAAKiC,WAAL,CAAiBlC,KAAjB,CAAwBC,UAAxB,CAAzB,CAAtR,CAAjB;AACAW,YAAYR,IAAZ,CAAiB,qDAAO,IAAI,IAAX,EAAoBhB,UAApB,EAAgC,QAAS,kBAAM,CAAE,OAAKE,QAAL,CAAc,CAAEC,UAAW,IAAb,CAAd,EAAqCH,WAAW+C,OAAZ,EAAwB/C,WAAW+C,OAAX,EAAxB,CAA8C,CAAnI,CAAqI,OAAQ,iBAAM;AACjK/C,WAAWC,KAAZ,CAAqB,OAAKC,QAAL,CAAc;AACjCC,UAAW,IADsB,CAAd,CAArB;AAEK,CAAE,OAAKR,KAAL,CAAWC,IAAX,CAAgBuC,MAAlB,EAA6B,OAAKjC,QAAL,CAAc,CAAEC,UAAW,KAAb,CAAd,CAFlC,CAEwEH,WAAWgD,MAAZ,EAAuBhD,WAAWgD,MAAX,EAAvB;AACxE,CAJgB,CAId,aAAc,2BAAQ,CAAE,OAAK9C,QAAL,CAAc,CAAEN,SAAF,CAAd,EAA0BI,WAAWiD,YAAZ,EAA6BjD,WAAWiD,YAAX,CAAwBrD,IAAxB,CAA7B,CAA4D,CAJ/F,GAAjB;AAKD,CARD;AASK,GAAI,KAAKF,KAAL,CAAWqB,aAAf,CAA8B;AACjCS,YAAYR,IAAZ,CAAiB,oDAAU,IAAV,EAAe,IAAI,OAAnB,CAA2B,MAAO,CAAEoB,SAAU,UAAZ,CAAwBC,KAAO,KAAK3C,KAAL,CAAW4C,IAAZ,CAAoB,EAApB,CAAyB,CAAvD,CAA0DC,MAAO,CAAjE,CAAoEC,IAAK,KAAK7C,KAAL,CAAWE,OAApF,CAA6F4C,QAAS,KAAK9C,KAAL,CAAWI,QAAjH,CAA2H2C,WAAa,sBAASC,EAAT,GAAgB,KAAjB,CAA0BC,SAA1B,CAAsCA,SAA7K,CAAwLC,cAAgB,sBAASF,EAAT,GAAgB,KAAjB,CAA0BC,SAA1B,CAAsC,EAA7O,CAAlC,EAAqR,2CAAW/B,UAAX,CAAwB,KAAKiC,WAAL,CAAiBlC,KAAjB,CAAwBC,UAAxB,CAAxB,CAArR,CAAjB;AACAW,YAAYR,IAAZ,CAAiB,qDAAO,IAAK,aAACkC,CAAD,QAAO,QAAK5C,SAAL,CAAiB4C,CAAxB,EAAZ,CAAuC,MAAO,KAAKvD,KAAL,CAAWC,IAAzD,CAA+D,IAAI,IAAnE,EAA4EI,UAA5E,EAAwF,QAAS,kBAAM,CAAE,OAAKE,QAAL,CAAc,CAAEC,UAAW,IAAb,CAAd,EAAqCH,WAAW+C,OAAZ,EAAwB/C,WAAW+C,OAAX,EAAxB,CAA8C,CAA3L,CAA6L,OAAQ,iBAAM;AACzN/C,WAAWC,KAAZ,CAAqB,OAAKC,QAAL,CAAc;AACjCC,UAAW,IADsB,CAAd,CAArB;AAEK,CAAE,OAAKR,KAAL,CAAWC,IAAX,CAAgBuC,MAAlB,EAA6B,OAAKjC,QAAL,CAAc,CAAEC,UAAW,KAAb,CAAd,CAFlC,CAEwEH,WAAWgD,MAAZ,EAAuBhD,WAAWgD,MAAX,EAAvB;AACxE,CAJgB,CAId,aAAc,2BAAQ,CAAE,OAAK9C,QAAL,CAAc,CAAEN,SAAF,CAAd,EAA0BI,WAAWiD,YAAZ,EAA6BjD,WAAWiD,YAAX,CAAwBrD,IAAxB,CAA7B,CAA4D,CAJ/F,GAAjB;AAKD,CAPI;AAQA,GAAI,KAAKF,KAAL,CAAWyD,YAAX,EAA2BlB,KAAKE,MAApC,CAA4C;AAC/CX,YAAYR,IAAZ,CAAiB,iDAAM,IAAI,GAAV,CAAc,MAAO,CAAEoC,cAAe,KAAjB,CAAwBC,KAAM,CAA9B,CAAiCC,MAAO,mBAAUC,WAAV,CAAwB,EAAhE,CAArB,EAA2F,mDAAM,IAAI,IAAV,EAAmBrB,SAAnB,EAA3F,CAA2H,iDAAM,MAAO,CAAEkB,cAAe,QAAjB,CAAb,EAA0C,qDAAO,IAAI,IAAX,EAAoBvC,UAApB,EAA1C,CAAkF,qDAAO,IAAI,IAAX,EAAoBb,UAApB,EAAgC,MAAO,CAAEsD,MAAO,mBAAUC,WAAV,CAAwB,EAAjC,CAAvC,GAAlF,CAA3H,CAAjB;;AAED,CAHI;AAIA;AACH,MAAO,MAAK7D,KAAL,CAAWkC,QAAlB;AACD;AACD,MAAOJ,YAAP;AACD,C;AACiB;AAChB,MAAO;AACLgC,kBAAmB;AACjBC,YAAc,KAAK/D,KAAL,CAAWgE,OAAZ,CAAwB,mBAAUD,WAAV,CAAwB,CAAhD,CAAqDb,SADjD;AAEjBe,aAAe,KAAKjE,KAAL,CAAWgE,OAAZ,CAAuB,mBAAUE,6BAAjC,CAAiEhB,SAF9D,CADd,CAAP;;;AAMD,C;;AAEkB;AACjB,GAAMiB,cAAe;AACnBzC,MAAO,KAAK0C,eAAL,GAAuBN,iBADX,CAArB;;;AAIA,MAAO,2BAAa,KAAK9D,KAAlB,CAAyBmE,YAAzB,CAAP;AACD,C;AACQ;AACP;AACE,sEAAkB,IAAK,sBAAK,QAAKE,KAAL,CAAab,CAAlB,EAAvB,EAAgD,KAAKc,gBAAL,EAAhD,EAA0E,cAAe,CAAzF;AACG,KAAKC,cAAL,EADH,CADF;;;AAKD,C;;;AAGH,GAAMC,cAAe,QAAfA,aAAe,CAAUxE,KAAV,CAAiByE,QAAjB,CAA2BC,SAA3B,CAAsC;AACzD,GAAIC,aAAJ;AACA,GAAMC,MAAO5E,MAAMyE,QAAN,CAAb;AACA,GAAI,CAACzE,MAAMkC,QAAN,CAAeO,MAApB,CAA4B;AAC1BkC,MAAQ,GAAIE,MAAJ,CAAaH,SAAb,gDAAR;AACD,CAFD,IAEO,IAAI1E,MAAMkC,QAAN,CAAe,CAAf,EAAkBG,IAAlB,CAAuByC,WAAvB,GAAuC,eAAvC,EAA0D9E,MAAMkC,QAAN,CAAe,CAAf,EAAkBG,IAAlB,CAAuByC,WAAvB,GAAuC,eAArG,CAAsH;AAC3HH,MAAQ,GAAIE,MAAJ,CAAaH,SAAb,gDAAR;AACD;AACD,MAAOC,MAAP;AACD,CATD;;AAWA5E,KAAKgF,SAAL;AACK,8BAAiBA,SADtB;AAEErD,MAAO,gBAAMsD,SAAN,CAAgBC,MAFzB;AAGEC,YAAa,gBAAMF,SAAN,CAAgBG,IAH/B;AAIE9D,cAAe,gBAAM2D,SAAN,CAAgBG,IAJjC;AAKE1B,aAAc,gBAAMuB,SAAN,CAAgBG,IALhC;AAMEC,WAAY,gBAAMJ,SAAN,CAAgBG,IAN9B;AAOEE,QAAS,gBAAML,SAAN,CAAgBG,IAP3B;AAQER,MAAO,gBAAMK,SAAN,CAAgBG,IARzB;;;AAWA,GAAMG,YAAa,yCAAa,iBAAb,CAAgC,EAAhC,iCAA0DvF,IAA1D,CAAnB,C;;;AAGgBA,I,CAAduF,U","file":"Item.js","sourcesContent":["import React, { Component } from 'react';\nimport { TouchableOpacity, Animated, Platform, View } from 'react-native';\nimport { Input } from './Input';\nimport { Label } from './Label';\nimport { Icon } from './Icon';\n\nimport { connectStyle } from 'native-base-shoutem-theme';\nimport variables from '../theme/variables/platform';\nimport computeProps from '../Utils/computeProps';\nimport mapPropsToStyleNames from '../Utils/mapPropsToStyleNames';\nimport _ from 'lodash';\n\nclass Item extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      text: '',\n      topAnim: new Animated.Value(18),\n      opacAnim: new Animated.Value(1),\n    };\n  }\n  componentDidMount() {\n    if (this.inputProps.value) {\n      this.setState({ isFocused: true });\n      this.floatUp(-16);\n    }\n    if (this.inputProps && this.inputProps.getRef)\n      this.inputProps.getRef(this._inputRef);\n  }\n\n  floatBack() {\n    Animated.timing(this.state.topAnim, {\n      toValue: 18,\n      duration: 150,\n    }).start();\n    Animated.timing(this.state.opacAnim, {\n      toValue: 1,\n      duration: 150,\n    }).start();\n  }\n\n  floatUp(e) {\n    Animated.timing(this.state.topAnim, {\n      toValue: e ? e : -22,\n      duration: 150,\n    }).start();\n    Animated.timing(this.state.opacAnim, {\n      toValue: 0.7,\n      duration: 150,\n    }).start();\n  }\n\n  renderLabel(label, labelProps) {\n    const newLabel = [];\n    if (this.props.floatingLabel) {\n      if (this.state.isFocused) {\n        newLabel.push(React.createElement(\n          Label,\n          {\n            ...labelProps,\n            key: 'newFLabel',\n            float: true,\n            style: {\n              fontSize: 15,\n              lineHeight: 30,\n              ...labelProps.style,\n            }\n          }\n        ));\n        this.floatUp();\n      } else {\n        newLabel.push(label);\n        this.floatBack();\n      }\n    } else {\n      newLabel.push(React.createElement(\n        Label,\n        {\n          ...labelProps,\n          key: 'newLabel',\n        }\n      ));\n    }\n    return newLabel;\n  }\n\n  renderChildren() {\n    const newChildren = [];\n    const childrenArray = React.Children.toArray(this.props.children);\n\n    let label = [];\n    let labelProps = {};\n    label = _.remove(childrenArray, (item) => {\n      if (item.type === Label) {\n        labelProps = item.props;\n        return item;\n      }\n    });\n\n    let input = [];\n    let inputProps = {};\n    input = _.remove(childrenArray, (item) => {\n      if (item.type === Input) {\n        inputProps = item.props;\n        this.inputProps = item.props;\n        return item;\n      }\n    });\n\n    let icon = [];\n    let iconProps = {};\n    icon = _.remove(childrenArray, (item) => {\n      if (item.type === Icon) {\n        iconProps = item.props;\n        return item;\n      }\n    });\n    if (this.props.floatingLabel && icon.length) {\n      newChildren.push(<Icon key=\"i1\" {...iconProps} />);\n      newChildren.push(<Animated.View key=\"float\" style={{ position: 'absolute', left: (this.props.last) ? 22 : 22, right: 0, top: this.state.topAnim, opacity: this.state.opacAnim, paddingTop: (Platform.OS === 'ios') ? undefined : undefined, paddingBottom: (Platform.OS === 'ios') ? undefined : 12 }}><Label {...labelProps} >{this.renderLabel(label, labelProps)}</Label></Animated.View>);\n      newChildren.push(<Input key=\"l2\" {...inputProps} onFocus={() => { this.setState({ isFocused: true }); (inputProps.onFocus) && inputProps.onFocus() }} onBlur={() => {\n        (inputProps.value) ? this.setState({\n          isFocused: true\n        }) : !(this.state.text.length) && this.setState({ isFocused: false }); (inputProps.onBlur) && inputProps.onBlur()\n      }} onChangeText={text => { this.setState({ text }); (inputProps.onChangeText) && inputProps.onChangeText(text) }} />);\n    }\n    else if (this.props.floatingLabel) {\n      newChildren.push(<Animated.View key=\"float\" style={{ position: 'absolute', left: (this.props.last) ? 15 : 0, right: 0, top: this.state.topAnim, opacity: this.state.opacAnim, paddingTop: (Platform.OS === 'ios') ? undefined : undefined, paddingBottom: (Platform.OS === 'ios') ? undefined : 12 }}><Label {...labelProps}>{this.renderLabel(label, labelProps)}</Label></Animated.View>);\n      newChildren.push(<Input ref={(c) => this._inputRef = c} value={this.state.text} key=\"l2\" {...inputProps} onFocus={() => { this.setState({ isFocused: true }); (inputProps.onFocus) && inputProps.onFocus() }} onBlur={() => {\n        (inputProps.value) ? this.setState({\n          isFocused: true\n        }) : !(this.state.text.length) && this.setState({ isFocused: false }); (inputProps.onBlur) && inputProps.onBlur()\n      }} onChangeText={text => { this.setState({ text }); (inputProps.onChangeText) && inputProps.onChangeText(text) }} />);\n    }\n    else if (this.props.stackedLabel && icon.length) {\n      newChildren.push(<View key=\"s\" style={{ flexDirection: 'row', flex: 1, width: variables.deviceWidth - 15 }}><Icon key=\"s1\" {...iconProps} /><View style={{ flexDirection: 'column' }}><Label key=\"s2\" {...labelProps}></Label><Input key=\"s3\" {...inputProps} style={{ width: variables.deviceWidth - 40 }} /></View></View>);\n\n    }\n    else {\n      return this.props.children;\n    }\n    return newChildren;\n  }\n  getInitialStyle() {\n    return {\n      roundedInputGroup: {\n        borderWidth: (this.props.rounded) ? (variables.borderWidth * 2) : undefined,\n        borderRadius: (this.props.rounded) ? variables.inputGroupRoundedBorderRadius : undefined,\n      },\n    };\n  }\n\n  prepareRootProps() {\n    const defaultProps = {\n      style: this.getInitialStyle().roundedInputGroup,\n    };\n\n    return computeProps(this.props, defaultProps);\n  }\n  render() {\n    return (\n      <TouchableOpacity ref={c => this._root = c} {...this.prepareRootProps() } activeOpacity={1}>\n        {this.renderChildren()}\n      </TouchableOpacity>\n    );\n  }\n}\n\nconst childrenType = function (props, propName, component) {\n  let error;\n  const prop = props[propName];\n  if (!props.children.length) {\n    error = new Error(`${component} should have both Label and Input components`);\n  } else if (props.children[0].type.displayName !== 'Styled(Label)' || props.children[1].type.displayName !== 'Styled(Input)') {\n    error = new Error(`${component} should have Label and Input components only`);\n  }\n  return error;\n};\n\nItem.propTypes = {\n  ...TouchableOpacity.propTypes,\n  style: React.PropTypes.object,\n  inlineLabel: React.PropTypes.bool,\n  floatingLabel: React.PropTypes.bool,\n  stackedLabel: React.PropTypes.bool,\n  fixedLabel: React.PropTypes.bool,\n  success: React.PropTypes.bool,\n  error: React.PropTypes.bool,\n};\n\nconst StyledItem = connectStyle('NativeBase.Item', {}, mapPropsToStyleNames)(Item);\n\nexport {\n  StyledItem as Item,\n};\n"]}