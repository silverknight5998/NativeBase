{"version":3,"sources":["../../../../src/smart/STabs/index.js"],"names":["STabs","tabBarPosition","initialPage","page","onChangeTab","onScroll","scrollWithoutAnimation","props","currentPage","state","scrollValue","Value","containerWidth","get","width","goToPage","pageNumber","OS","offset","scrollView","scrollTo","x","y","animated","setPageWithoutAnimation","setPage","contentKey","callback","tabChange","bind","children","newKeys","setState","sceneKeys","prevPage","i","ref","tabContent","from","value","setValue","content","getContent","e","offsetX","nativeEvent","contentOffset","getScrollValue","flex","position","map","child","idx","Children","renderTabBar","cloneElement","vertical","tabBarProps","tabs","tabLabel","tabIcon","activeTab","iconPresent","tabBarTextStyle","tabBarIconStyle","tabBarUnderlineColor","underlineStyle","tabBarStyle","_root","c","renderTab","renderContent","bottom","propTypes","style","PropTypes","object","number","string","bool","StyledSTabs"],"mappings":"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","file":"index.js","sourcesContent":["import React, { Component } from 'react';\nimport { View, Animated, Dimensions, ScrollView, Platform, ViewPagerAndroid } from 'react-native';\nimport { connectStyle } from '@shoutem/theme';\nimport mapPropsToStyleNames from '../../Utils/mapPropsToStyleNames';\n\nimport { TabBar } from './TabBar';\nclass STabs extends Component {\n\n  static get defaultProps() {\n    return {\n      tabBarPosition: 'top',\n      initialPage: 0,\n      page: -1,\n      onChangeTab: () => {},\n      onScroll: () => {},\n      scrollWithoutAnimation: false,\n    };\n  }\n\n  constructor(props) {\n    super(props);\n    const currentPage = (this.props.initialPage) ? this.props.initialPage : 0;\n    this.state = {\n      scrollValue: new Animated.Value(this.props.initialPage),\n      containerWidth: Dimensions.get('window').width,\n      currentPage,\n    };\n  }\n  componentWillReceiveProps(props) {\n    if (props.page >= 0 && props.page !== this.state.currentPage) {\n      this.goToPage(props.page);\n    }\n  }\n\n  goToPage(pageNumber) {\n    if (Platform.OS === 'ios') {\n      const offset = pageNumber * this.state.containerWidth;\n      if (this.scrollView) {\n        this.scrollView.scrollTo({ x: offset, y: 0, animated: !this.props.scrollWithoutAnimation });\n      }\n    } else if (this.scrollView) {\n      if (this.props.scrollWithoutAnimation) {\n        this.scrollView.setPageWithoutAnimation(pageNumber);\n      } else {\n        this.scrollView.setPage(pageNumber);\n      }\n    }\n\n    const currentPage = this.state.currentPage;\n    this.contentKey({\n      page: pageNumber,\n      callback: this.tabChange.bind(this, currentPage, pageNumber),\n    });\n  }\n\n\n  contentKey({ page, children = this.props.children, callback = () => {} }) {\n    const newKeys = page;\n    this.setState({ currentPage: page, sceneKeys: newKeys }, callback);\n  }\n\n  tabChange(prevPage, currentPage) {\n    this.props.onChangeTab({\n      i: currentPage,\n      ref: this.tabContent()[currentPage],\n      from: prevPage,\n    });\n  }\n\n  getScrollValue(value) {\n    this.state.scrollValue.setValue(value);\n    this.props.onScroll(value);\n  }\n\n  renderContent() {\n    const content = this.getContent();\n    if (Platform.OS === 'ios') {\n      return (<ScrollView\n        horizontal\n        pagingEnabled\n        automaticallyAdjustContentInsets={false}\n        contentOffset={{ x: this.props.initialPage * this.state.containerWidth }}\n        ref={(scrollView) => { this.scrollView = scrollView; }}\n        onScroll={(e) => {\n          const offsetX = e.nativeEvent.contentOffset.x;\n          this.getScrollValue(offsetX / this.state.containerWidth);\n        }}\n        scrollEventThrottle={16}\n        scrollsToTop={false}\n        showsHorizontalScrollIndicator={false}\n        scrollEnabled={false}\n        directionalLockEnabled\n        alwaysBounceVertical={false}\n      >\n        {content}\n      </ScrollView>);\n    } else {\n      return (<ViewPagerAndroid\n        style={{ flex: 1 }}\n        initialPage={this.props.initialPage}\n        scrollEnabled={false}\n        onPageScroll={(e) => {\n          const { offset, position } = e.nativeEvent;\n          this.getScrollValue(position + offset);\n        }}\n        ref={(scrollView) => { this.scrollView = scrollView; }}\n      >\n        {content}\n      </ViewPagerAndroid>);\n    }\n  }\n\n  getContent() {\n    return this.tabContent().map((child, idx) => <View\n      key={idx}\n      style={{ width: this.state.containerWidth }}\n    >\n      {child}\n    </View>);\n  }\n\n  tabContent() {\n    return React.Children.map(this.props.children, child => child);\n  }\n\n  renderTab(props) {\n    if (this.props.renderTabBar === false) {\n      return null;\n    } else if (this.props.renderTabBar) {\n      return React.cloneElement(this.props.renderTabBar(props), props);\n    } else {\n      return <TabBar {...props} vertical={this.props.vertical} />;\n    }\n  }\n\n  render() {\n    const tabBarProps = {\n      goToPage: this.goToPage.bind(this),\n      tabs: this.props.children.map(child => child.props.tabLabel),\n      tabIcon: this.props.children.map(child => child.props.tabIcon),\n      activeTab: this.state.currentPage,\n      iconPresent: (this.props.children[0].props.tabIcon) ? true : false,\n      tabBarTextStyle: this.props.tabBarTextStyle,\n      tabBarIconStyle: this.props.tabBarIconStyle,\n      tabBarUnderlineColor: this.props.tabBarUnderlineColor,\n      underlineStyle: this.props.underlineStyle,\n      tabBarStyle: this.props.tabBarStyle,\n      scrollValue: this.state.scrollValue,\n    };\n\n    return (\n      <View ref={c => this._root = c} {...this.props}>\n        {this.props.tabBarPosition === 'top' && this.renderTab(tabBarProps)}\n        {this.renderContent()}\n        <View style={(this.props.tabBarPosition === 'bottom') ? { bottom: (Platform.OS === 'ios') ? 0 : 23 } : {}}>\n          {this.props.tabBarPosition === 'bottom' && this.renderTab(tabBarProps)}\n        </View>\n      </View>\n    );\n  }\n}\n\nSTabs.propTypes = {\n  ...View.propTypes,\n  style: React.PropTypes.object,\n  initialPage: React.PropTypes.number,\n  tabBarPosition: React.PropTypes.string,\n  tabBarTextStyle: React.PropTypes.object,\n  tabBarIconStyle: React.PropTypes.object,\n  tabBarStyle: React.PropTypes.object,\n  underlineStyle: React.PropTypes.object,\n  vertical: React.PropTypes.bool,\n};\n\nconst StyledSTabs = connectStyle('NativeBase.STabs', {}, mapPropsToStyleNames)(STabs);\n\nexport {\n  StyledSTabs as STabs,\n};\n"]}